environments:
  parameters:
    - name: tenantId
      in: path
      required: true
      description: Unique identifier of the tenant
      schema:
        type: integer
        format: int64

  get:
    operationId: listEnvironments
    summary: List environments for a tenant
    description: Retrieve all environments configured for a specific tenant.
    tags:
      - Environments
    responses:
      '200':
        description: List of environments
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/schemas/environments.yaml#/EnvironmentListResponse'
      '404':
        description: Tenant not found
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'

  post:
    operationId: createEnvironment
    summary: Create a new environment
    description: Create a new environment for the specified tenant.
    tags:
      - Environments
    requestBody:
      required: true
      content:
        application/vnd.epistola.v1+json:
          schema:
            $ref: '../components/schemas/environments.yaml#/CreateEnvironmentRequest'
    responses:
      '201':
        description: Environment created successfully
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/schemas/environments.yaml#/EnvironmentDto'
      '400':
        description: Invalid request
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ValidationErrorResponse'
      '404':
        description: Tenant not found
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'
      '409':
        description: Environment with this name already exists
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'

environments-id:
  parameters:
    - name: tenantId
      in: path
      required: true
      description: Unique identifier of the tenant
      schema:
        type: integer
        format: int64
    - name: environmentId
      in: path
      required: true
      description: Unique identifier of the environment
      schema:
        type: integer
        format: int64

  get:
    operationId: getEnvironment
    summary: Get environment by ID
    description: Retrieve details of a specific environment.
    tags:
      - Environments
    responses:
      '200':
        description: Environment details
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/schemas/environments.yaml#/EnvironmentDto'
      '404':
        description: Environment or tenant not found
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'

  patch:
    operationId: updateEnvironment
    summary: Update an environment
    description: Update an existing environment's name.
    tags:
      - Environments
    requestBody:
      required: true
      content:
        application/vnd.epistola.v1+json:
          schema:
            $ref: '../components/schemas/environments.yaml#/UpdateEnvironmentRequest'
    responses:
      '200':
        description: Environment updated successfully
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/schemas/environments.yaml#/EnvironmentDto'
      '400':
        description: Invalid request
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ValidationErrorResponse'
      '404':
        description: Environment or tenant not found
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'
      '409':
        description: Environment with this name already exists
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'

  delete:
    operationId: deleteEnvironment
    summary: Delete an environment
    description: Delete an environment and all its activations.
    tags:
      - Environments
    responses:
      '204':
        description: Environment deleted successfully
      '404':
        description: Environment or tenant not found
        content:
          application/vnd.epistola.v1+json:
            schema:
              $ref: '../components/responses/errors.yaml#/ErrorResponse'
