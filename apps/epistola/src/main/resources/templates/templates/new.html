<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
    <th:block th:fragment="content">
        <nav class="breadcrumb">
            <a th:href="@{/tenants/{tenantId}/templates(tenantId=${tenantId})}">Templates</a> &raquo; <span>New Template</span>
        </nav>

        <h1>New Template</h1>

        <div class="card create-form-card">
            <div class="card-content">
                <form th:action="@{/tenants/{tenantId}/templates(tenantId=${tenantId})}" method="post">
                    <div class="form-group" th:classappend="${errors?.containsKey('slug')} ? 'error' : ''">
                        <label class="ep-label" for="slug">Template ID (Slug)</label>
                        <input type="text" id="slug" name="slug" class="ep-input"
                               required pattern="^[a-z][a-z0-9]*(-[a-z0-9]+)*$"
                               minlength="3" maxlength="50"
                               placeholder="monthly-invoice"
                               th:value="${formData?.slug}">
                        <span class="form-hint">3-50 characters, lowercase letters, numbers, and hyphens only</span>
                        <span class="form-error" th:if="${errors?.containsKey('slug')}" th:text="${errors.slug}"></span>
                    </div>
                    <div class="form-group" th:classappend="${errors?.containsKey('name')} ? 'error' : ''">
                        <label class="ep-label" for="name">Name</label>
                        <input type="text" id="name" name="name" class="ep-input"
                               required placeholder="Monthly Invoice"
                               th:value="${formData?.name}">
                        <span class="form-error" th:if="${errors?.containsKey('name')}" th:text="${errors.name}"></span>
                    </div>
                    <div class="form-group" th:classappend="${errors?.containsKey('schema')} ? 'error' : ''">
                        <label class="ep-label" for="schema">JSON Schema (optional)</label>
                        <textarea id="schema" name="schema" class="ep-textarea" rows="6"
                                  placeholder='{"type": "object", "properties": {...}}'
                                  th:text="${formData?.schema}"></textarea>
                        <span class="form-hint">Define the data contract for this template</span>
                        <span class="form-error" th:if="${errors?.containsKey('schema')}" th:text="${errors.schema}"></span>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Create Template</button>
                        <a th:href="@{/tenants/{tenantId}/templates(tenantId=${tenantId})}" class="btn btn-outline">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </th:block>
</body>
</html>
