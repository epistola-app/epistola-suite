<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
    <th:block th:fragment="content">
        <div class="page-header">
            <h1>Templates</h1>
            <div class="page-actions">
                <div th:replace="~{fragments/search :: search-box(
                    placeholder='Search templates...',
                    searchUrl=@{/tenants/{tenantId}/templates/search(tenantId=${tenantId})},
                    targetId='template-rows'
                )}"></div>
                <a th:href="@{/tenants/{tenantId}/templates/new(tenantId=${tenantId})}" class="btn btn-primary">
                    <th:block th:replace="~{fragments/icon :: icon(name='plus', class='ep-icon')}" />
                    New Template
                </a>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(templates)}" class="empty-state">
            <div class="empty-state-icon">
                <th:block th:replace="~{fragments/icon :: icon(name='file-text', class='ep-icon ep-icon-xl')}" />
            </div>
            <div class="empty-state-title">No templates yet</div>
            <div class="empty-state-description">Create your first document template to get started.</div>
            <a th:href="@{/tenants/{tenantId}/templates/new(tenantId=${tenantId})}" class="btn btn-primary" style="margin-top: var(--ep-space-4);">
                <th:block th:replace="~{fragments/icon :: icon(name='plus', class='ep-icon')}" />
                New Template
            </a>
        </div>

        <table th:if="${!#lists.isEmpty(templates)}" class="ep-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>ID</th>
                    <th>Variants</th>
                    <th>Last Modified</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="template-rows">
                <th:block th:fragment="rows">
                    <tr th:each="template : ${templates}">
                        <td>
                            <a th:href="@{/tenants/{tenantId}/templates/{id}(tenantId=${tenantId},id=${template.id})}"
                               th:text="${template.name}" style="font-weight: 500;"></a>
                        </td>
                        <td><code th:text="${template.id}" style="font-size: var(--ep-text-xs); color: var(--ep-muted-foreground);"></code></td>
                        <td th:text="${template.variantCount}"></td>
                        <td th:text="${#temporals.format(template.lastModified, 'yyyy-MM-dd HH:mm')}"></td>
                        <td class="actions">
                            <a th:href="@{/tenants/{tenantId}/templates/{id}(tenantId=${tenantId},id=${template.id})}" class="btn btn-sm btn-ghost">View</a>
                        </td>
                    </tr>
                </th:block>
            </tbody>
        </table>
    </th:block>
</body>
</html>
