<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Successful - Epistola</title>
    <th:block th:replace="~{fragments/styles :: styles}" />
</head>
<body>
    <div class="login-container">
        <div class="login-card" style="text-align: center;">
            <div style="color: var(--ep-green-600); margin-bottom: var(--ep-space-4);">
                <th:block th:replace="~{fragments/icon :: icon(name='check-circle', class='ep-icon ep-icon-xl')}" />
            </div>
            <p style="font-weight: 500; margin-bottom: var(--ep-space-2);">Login successful!</p>
            <p class="close-notice" style="color: var(--ep-muted-foreground); font-size: var(--ep-text-sm);">
                This window will close automatically...
            </p>
        </div>
    </div>

    <script>
        // Notify the opener window that session has been renewed
        if (window.opener) {
            try {
                window.opener.postMessage({ type: 'session-renewed' }, window.location.origin);
            } catch (e) {
                // Ignore cross-origin errors
            }
        }

        // Close the popup window
        // Use a small delay to ensure the message is sent
        setTimeout(function() {
            window.close();

            // If window.close() didn't work (some browsers restrict it),
            // show a message to the user
            document.querySelector('.close-notice').textContent =
                'You can close this window and return to your work.';
        }, 500);
    </script>
</body>
</html>
