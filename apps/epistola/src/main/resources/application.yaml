server:
  port: 4000

spring:
  application:
    name: epistola-suite
  threads:
    virtual:
      enabled: true

# Note: OAuth2 configuration is in application-prod.yaml
# Local development uses form login (see application-local.yaml)
# Tests use permit-all (see application-test.yaml)

epistola:
  auth:
    provider: local  # Default to local, override in prod profile
    registration-id: keycloak
    auto-provision: false
  demo:
    enabled: true  # Set to false to disable demo loading
  generation:
    polling:
      enabled: true              # Enable polling-based job execution
      interval-ms: 5000          # Poll every 5 seconds
      max-concurrent-jobs: 2     # Max jobs per instance
      stale-timeout-minutes: 10  # Reclaim jobs after 10 min of no progress
    async:
      concurrency: 10            # Items processed concurrently per job
    jobs:
      retention-days: 7          # Auto-delete completed jobs after 7 days
      cleanup-cron: "0 0 2 * * ?"  # Run cleanup at 2 AM daily
    documents:
      retention-days: 30         # Auto-delete documents after 30 days
      max-size-mb: 50            # Max document size

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      probes:
        enabled: true
      show-details: never
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true

